<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>3 Clients tests</title>
    <script type='text/javascript' src='../node_modules/jquery/dist/jquery.min.js'> </script>
    <script type='text/javascript' src='../build/foglet-ndp.bundle.js' > </script>
  </head>

  <script type='text/javascript'>
    localStorage.debug = 'HttpClient,*ladda*';

    const NDP = require('foglet-ndp').NDP;
    let endpoint = 'http://172.16.9.3:5000/dbpedia_3_8';
    let request = [
      "PREFIX dbp: <http://dbpedia.org/resource/Jos%C3%A9_Amaya> \t\t\t   PREFIX dbp2: <http://dbpedia.org/ontology/> \t\t\t  \t\t\t   SELECT ?abstract \t\t\t   WHERE { \t\t\t\t  dbp:  \t\t\t\t  dbp2:abstract ?abstract .  \t\t\t\t  FILTER langMatches(lang(?abstract), 'en') \t\t\t   }\n",
    	"PREFIX foaf: <http://xmlns.com/foaf/0.1/> PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#> PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> SELECT * WHERE { {?city rdfs:label 'El Badari'@en.} UNION { ?alias <http://dbpedia.org/property/redirect> ?city;  rdfs:label 'El Badari'@en. } UNION { ?alias <http://dbpedia.org/property/disambiguates> ?city;  rdfs:label 'El Badari'@en. } OPTIONAL { ?city <http://dbpedia.org/ontology/abstract> ?abstract} OPTIONAL { ?city geo:lat ?latitude; geo:long ?longitude}OPTIONAL { ?city foaf:depiction ?image } OPTIONAL { ?city rdfs:label ?name } OPTIONAL { ?city foaf:homepage ?home } OPTIONAL { ?city <http://dbpedia.org/ontology/populationTotal> ?population } OPTIONAL { ?city <http://dbpedia.org/ontology/thumbnail> ?thumbnail } FILTER (langMatches( lang(?abstract), 'en'))}\n",
    	"PREFIX foaf: <http://xmlns.com/foaf/0.1/> PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#> PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> SELECT * WHERE { {?city rdfs:label 'Alghisi'@en.} UNION { ?alias <http://dbpedia.org/property/redirect> ?city;  rdfs:label 'Alghisi'@en. } UNION { ?alias <http://dbpedia.org/property/disambiguates> ?city;  rdfs:label 'Alghisi'@en. } OPTIONAL { ?city <http://dbpedia.org/ontology/abstract> ?abstract} OPTIONAL { ?city geo:lat ?latitude; geo:long ?longitude}OPTIONAL { ?city foaf:depiction ?image } OPTIONAL { ?city rdfs:label ?name } OPTIONAL { ?city foaf:homepage ?home } OPTIONAL { ?city <http://dbpedia.org/ontology/populationTotal> ?population } OPTIONAL { ?city <http://dbpedia.org/ontology/thumbnail> ?thumbnail } FILTER (langMatches( lang(?abstract), 'en'))}\n",
    	"PREFIX foaf: <http://xmlns.com/foaf/0.1/> PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> SELECT * WHERE { ?city a <http://dbpedia.org/ontology/Place>; rdfs:label 'Lužnice'@en.  ?airport a <http://dbpedia.org/ontology/Airport>. {?airport <http://dbpedia.org/ontology/city> ?city} UNION {?airport <http://dbpedia.org/ontology/location> ?city} UNION {?airport <http://dbpedia.org/property/cityServed> ?city.} UNION {?airport <http://dbpedia.org/ontology/city> ?city. }{?airport <http://dbpedia.org/property/iata> ?iata.} UNION  {?airport <http://dbpedia.org/ontology/iataLocationIdentifier> ?iata. } OPTIONAL { ?airport foaf:homepage ?airport_home. } OPTIONAL { ?airport rdfs:label ?name. } OPTIONAL { ?airport <http://dbpedia.org/property/nativename> ?airport_name.} FILTER ( !bound(?name) || langMatches( lang(?name), 'en') )}\n",
    	"PREFIX foaf: <http://xmlns.com/foaf/0.1/> PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#> PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> SELECT * WHERE { {?city rdfs:label 'Lužnice'@en.} UNION { ?alias <http://dbpedia.org/property/redirect> ?city;  rdfs:label 'Lužnice'@en. } UNION { ?alias <http://dbpedia.org/property/disambiguates> ?city;  rdfs:label 'Lužnice'@en. } OPTIONAL { ?city <http://dbpedia.org/ontology/abstract> ?abstract} OPTIONAL { ?city geo:lat ?latitude; geo:long ?longitude}OPTIONAL { ?city foaf:depiction ?image } OPTIONAL { ?city rdfs:label ?name } OPTIONAL { ?city foaf:homepage ?home } OPTIONAL { ?city <http://dbpedia.org/ontology/populationTotal> ?population } OPTIONAL { ?city <http://dbpedia.org/ontology/thumbnail> ?thumbnail } FILTER (langMatches( lang(?abstract), 'en'))}\n",
    	"PREFIX foaf: <http://xmlns.com/foaf/0.1/> PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> SELECT * WHERE {  ?airport a <http://dbpedia.org/ontology/Airport>; rdfs:label ?name. {?airport <http://dbpedia.org/property/iata> 'LNZ'@en.} UNION  {?airport <http://dbpedia.org/ontology/iataLocationIdentifier> 'LNZ'@en. } OPTIONAL { ?airport foaf:homepage ?airport_home. } OPTIONAL { ?airport rdfs:label ?name. } OPTIONAL { ?airport <http://dbpedia.org/property/nativename> ?airport_name.} FILTER ( !bound(?name) || langMatches( lang(?name), 'en') )}\n",
    	"PREFIX foaf: <http://xmlns.com/foaf/0.1/> PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> SELECT * WHERE { ?city a <http://dbpedia.org/ontology/Place>; rdfs:label 'Rožmberk nad Vltavou'@en.  ?airport a <http://dbpedia.org/ontology/Airport>. {?airport <http://dbpedia.org/ontology/city> ?city} UNION {?airport <http://dbpedia.org/ontology/location> ?city} UNION {?airport <http://dbpedia.org/property/cityServed> ?city.} UNION {?airport <http://dbpedia.org/ontology/city> ?city. }{?airport <http://dbpedia.org/property/iata> ?iata.} UNION  {?airport <http://dbpedia.org/ontology/iataLocationIdentifier> ?iata. } OPTIONAL { ?airport foaf:homepage ?airport_home. } OPTIONAL { ?airport rdfs:label ?name. } OPTIONAL { ?airport <http://dbpedia.org/property/nativename> ?airport_name.} FILTER ( !bound(?name) || langMatches( lang(?name), 'en') )}\n",
    	"PREFIX foaf: <http://xmlns.com/foaf/0.1/> PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#> PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> SELECT * WHERE { {?city rdfs:label 'Rožmberk nad Vltavou'@en.} UNION { ?alias <http://dbpedia.org/property/redirect> ?city;  rdfs:label 'Rožmberk nad Vltavou'@en. } UNION { ?alias <http://dbpedia.org/property/disambiguates> ?city;  rdfs:label 'Rožmberk nad Vltavou'@en. } OPTIONAL { ?city <http://dbpedia.org/ontology/abstract> ?abstract} OPTIONAL { ?city geo:lat ?latitude; geo:long ?longitude}OPTIONAL { ?city foaf:depiction ?image } OPTIONAL { ?city rdfs:label ?name } OPTIONAL { ?city foaf:homepage ?home } OPTIONAL { ?city <http://dbpedia.org/ontology/populationTotal> ?population } OPTIONAL { ?city <http://dbpedia.org/ontology/thumbnail> ?thumbnail } FILTER (langMatches( lang(?abstract), 'en'))}\n",
    	"PREFIX onto: <http://dbpedia.org/ontology/>\r \t\tPREFIX foaf: <http://xmlns.com/foaf/0.1/>\r \t\tSELECT ?page ?reference  WHERE {\r \t\t<http://dbpedia.org/resource/Parliament_of_Norway> foaf:page ?page .\r \t\tOPTIONAL {<http://dbpedia.org/resource/Parliament_of_Norway> onto:wikiPageExternalLink ?reference .}\r \t\t}\n",
    	"PREFIX onto: <http://dbpedia.org/ontology/>\r \t\tPREFIX foaf: <http://xmlns.com/foaf/0.1/>\r \t\tSELECT ?page ?reference  WHERE {\r \t\t<http://dbpedia.org/resource/H%C3%A9l%C3%A8ne_Cixous> foaf:page ?page .\r \t\tOPTIONAL {<http://dbpedia.org/resource/H%C3%A9l%C3%A8ne_Cixous> onto:wikiPageExternalLink ?reference .}\r \t\t}\n"
    ];



    let f1,f2,f3;

    let verbose = true;

    f1 = new NDP({
      protocol: 'testNdp',
      webrtc:	{
        trickle: true,
        iceServers : []
      },
      signalingAdress: 'http://signaling.herokuapp.com/',
      room: 'test',
      verbose: verbose
    });
    f2 = new NDP({
      protocol: 'testNdp',
      webrtc:	{
        trickle: true,
        iceServers : []
      },
      signalingAdress: 'http://signaling.herokuapp.com/',
      room: 'test',
      verbose: verbose
    });

    f3 = new NDP({
      protocol: 'testNdp',
      webrtc:	{
        trickle: true,
        iceServers : []
      },
      signalingAdress: 'http://signaling.herokuapp.com/',
      room: 'test',
      verbose: verbose
    });

    f1.init();
    f2.init();
    f3.init();

    f1.connection().then(() => {
      f2.connection().then(() => {
        f3.connection().then(() => {
          f1.delegationProtocol.sendPromise(request, endpoint).then(response => {
            console.log(response);
          });
        });
      });
    });

    f1.onUnicast((id, message) => console.log);
    f2.onUnicast((id, message) => console.log);
    f3.onUnicast((id, message) => console.log);
  </script>

  <body>
    <h3> Please see your console (F12) to see logs of the example </h3>
    <p> If an error appeared with jquery, it's because you did not clone the repository from github, you just installed the package with npm.
      <br/> JQuery is not in the dependencies installed.</p>
  </body>

</html>
